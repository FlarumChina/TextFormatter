TODO
====

- add an option to enable/disable individual tags in Parser(?)
- finish the Fabric plugin
- create a plugin for the Markdown syntax (or possibly Upskirt/Redcarpet) and name it Downmark to feel witty and have a plugin for each letter from A to H
- write documentation, el oh el
- Add a rule to automatically create a parent to a tag, e.g. create <LIST> when <LI> is used. After creating <LIST>, add its id to the "require" field so that we don't get in an infinite loop
- Support forcing text to be wrapped inside tags. e.g. "<LIST>foo" becomes "<LIST><LI>foo</LI>"
- There's potential for a bug in createMatchingTag when creating a tag based on a tag that with trimBefore enabled. The position of the new tag should probably be the actual position of the tag, not of the whitespace
- Investigate the possibility of replacing autoClose with isEmpty
- JSParserGenerator: if all the plugins' RLA is the same, remove them from the config and use hints to bypass the if test
- Investigate the possibility of using an external CSS checker in order to enable a default "css" filter
- Consider a Twitter BBCode (https://dev.twitter.com/docs/embedded-tweets)
- Create a way for special XSL to be evaluated at the start/end of a rendering in order to embed resources such as external scripts
- Add a [TWITCH] BBCode. Add support for embeding TwitchTV/JustinTV videos AND live channels
- Add support for HD/other options in [YOUTUBE] ?
- BBCodesConfig::addBBCodeFromExample() -- when passing [FOO={COMPOUND=/(?<bar>[0-9]+)/}] create @bar if it's not defined, make it a regexp based on the subpattern and possible sniff its type, e.g. [0-9] => NUMBER
- Create BBCodesConfig::getBBCodeTemplate() that returns the definition of a BBCode, e.g. [URL={URL}]{TEXT}[/URL]
- Fix [EMAIL]
- Add a tag option that disallows plain text, e.g. any text node that is a child of given tag is put inside a <i> element.
- Consider adding a "map" attribute filter that maps values, one to another. e.g. ["cpp"=>"C++"]
- Move the "reduce" part of ConfigBuilder::getTagsConfig() to its own method
- Tags with a require* rule should not be enabled in the root context
- Investigate whether requireParent rules can be optimized away by replacing them with allowChild/denyChild rules
- Same with tags that have a nestingLimit of 1, is there any benefit to adding a denyChild rule to it?
- Add exception codes to exceptions?
- Add an "alnum" or "alphanum" built-in filter that matches /^[a-z0-9]+$/iD and possibly an "hex" filter for /^[0-9a-f]+$/iD
- BBCodesConfig::addBBCodeFromExample() - try to cast defaultValue to the right PHP type
- Move plugins to ./Plugins/<pluginName>/(Config.php|Parser.(php|js))
- Replace PluginConfig::getXSL() with PluginConfig::getTemplates() which should return array([match]=>[template]) and each template goes through Templates::setTemplate() (how to evaluate attributes safety though)
- Look into properly implementing urlencode() and rawurlencode() in JS
- Fix custom XSL namespace prefix + namespaced tags (tags' namespaces declarations are lost in the process)
- Way to implement syntax highlighting at parsing time: create tags in the "stx" namespace and implement syntax highlighting via... a plugin maybe? At least some stuff would need to be hardcoded, first of which would be the end [/CODE] tag, and probably also its start tag, [CODE]. Make the namespaced tags requireAncestor their CODE tag
- Let generateRulesFromHTML5Specs() create rules that apply to the root context
- Add support for <ol start="2"/>
- Consider adding an #ip or #ipport filter
- Add a [FONT face={SIMPLETEXT}] bbcode/tag (could render to <span style="font-family:{SIMPLETEXT}">
- Remove reopenChild rule, add autoReopen as a tag option. Reopens tag if it gets closed by a closeParent (and closeAncestor?) rule, or if it gets closed by an ancestor's end tag, e.g. <b><i></b>
- Implement the concept of a plugin "tag formatter": give it a tag from the intermediate form and it returns the string that could have generated it. e.g. BBCodes's tag formatter takes <URL url="..."> and returns [URL url="..."] or [URL="...] -- tag content might be a problem though. Can we format any start/end tag without knowing what's in between?
- Add a Picasa(?) BBCode
- Read in #phpbb-dev: ""You cannot have 3 quotes within each other" I'm getting pretty annoyed by that one now >.<" "Has some kind of system that automatically removes the innermost quote been suggested? On large posts it's almost impossible to remove it by hand without messing the tags up :<" "Right now I just copy the text and paste it within [quote] because it's easier to see, but that kinda takes away the point with the quote button" -- could be implemented as a new setting: nestingLimitAction (similar to regexpLimitAction) with possible values "ignore" (leave as text), "strip" (remove content via <i> tag) and "abort" (throw exception?) -- Actually, this case is better handled at quoting time by removing the quotes from the original message directly, e.g. remove all //QUOTE//QUOTE//QUOTE nodes. Add a class that handles that kind of manipulation, e.g. removeNestedTags($tagName, $nestingLimit)
- Consider a way to generate a random number or ID, at parsing time or perhaps at rendering time. [foo id={RANDOM=0,100;base=36}] -- http://area51.phpbb.com/phpBB/viewtopic.php?f=81&t=42947 -- (PHP: base_convert(mt_rand(min, max), 10, base) - Javascript: (min + Math.floor(Math.random() * (max + 1 - min))).toString(base)) -- NOTE: could not be implemented as an attribute filter, would need to be implemented similarly to the old tag-level preFilter pass
- In url filter, escape special chars (such as quotes) first, then validate the URL so that the URL we validate and the URL we return are the same
